(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5315],{56611:function(e,t,a){Promise.resolve().then(a.bind(a,89815))},89815:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return g}});var s=a(57437),i=a(2265),n=a(24033),o=a(57418),r=a(34170),c=a(61396),l=a.n(c);let d=[{id:"responsavel",question:"Nome do Respons\xe1vel",type:"text",category:"dados_pessoais"},{id:"parentesco",question:"Parentesco",type:"text",category:"dados_pessoais"},{id:"encaminhamento",question:"Encaminhado por",type:"text",category:"dados_pessoais"},{id:"queixa_principal",question:"Queixa Principal",type:"text",category:"dados_pessoais"},{id:"experiencia_musical",question:"Experi\xeancia Musical Pr\xe9via",type:"multiple",options:["Aulas de m\xfasica","Canta em casa","Toca instrumento","Participa de coral","Dan\xe7a","Nenhuma experi\xeancia pr\xe9via"],category:"historia_musical"},{id:"musica_em_casa",question:"Rela\xe7\xe3o com M\xfasica em Casa",type:"multiple",options:["Ouve m\xfasica frequentemente","Canta espontaneamente","Dan\xe7a ao ouvir m\xfasica","Toca instrumentos","Demonstra interesse por sons","Reage negativamente a sons/m\xfasicas"],category:"historia_musical"},{id:"preferencias_musicais",question:"Prefer\xeancias Musicais",type:"multiple",options:["M\xfasicas infantis","MPB","Rock","Sertanejo","Gospel","Cl\xe1ssica","Outros g\xeaneros"],category:"preferencias_musicais"},{id:"reacoes_sonoras",question:"Rea\xe7\xf5es a Est\xedmulos Sonoros",type:"multiple",options:["Hipersensibilidade a sons","Busca est\xedmulos sonoros","Demonstra prazer com m\xfasica","Apresenta medo de sons espec\xedficos","Responde a chamados","Localiza fonte sonora"],category:"historia_musical"},{id:"desenvolvimento_motor",question:"Desenvolvimento Motor",type:"multiple",options:["Controle cervical","Sentar sem apoio","Engatinhar","Marcha independente","Coordena\xe7\xe3o motora fina","Coordena\xe7\xe3o motora grossa"],category:"desenvolvimento"},{id:"desenvolvimento_linguagem",question:"Desenvolvimento da Linguagem",type:"multiple",options:["Balbucios","Primeiras palavras","Frases simples","Comunica\xe7\xe3o n\xe3o-verbal","Ecolalia","Aus\xeancia de fala"],category:"desenvolvimento"},{id:"comportamento_social",question:"Comportamento Social",type:"multiple",options:["Contato visual","Intera\xe7\xe3o com pares","Brincadeira compartilhada","Isolamento social","Comportamentos repetitivos","Interesses restritos"],category:"comportamento"},{id:"regulacao_emocional",question:"Regula\xe7\xe3o Emocional",type:"multiple",options:["Irritabilidade","Ansiedade","Agressividade","Choro frequente","Mudan\xe7as bruscas de humor","Dificuldade em lidar com frustra\xe7\xf5es"],category:"comportamento"},{id:"diagnosticos",question:"Diagn\xf3sticos",type:"multiple",options:["TEA","TDAH","S\xedndrome de Down","Paralisia Cerebral","Defici\xeancia Intelectual","Transtornos de Ansiedade","Outros"],category:"saude"},{id:"medicamentos",question:"Medicamentos em Uso",type:"text",category:"saude"},{id:"outros_tratamentos",question:"Outros Tratamentos",type:"multiple",options:["Fonoaudiologia","Terapia Ocupacional","Psicologia","Fisioterapia","Psicopedagogia","Equoterapia"],category:"saude"},{id:"escolaridade",question:"Escolaridade",type:"single",options:["N\xe3o frequenta escola","Educa\xe7\xe3o Infantil","Ensino Fundamental I","Ensino Fundamental II","Escola Especial"],category:"social"},{id:"adaptacao_escolar",question:"Adapta\xe7\xe3o Escolar",type:"text",category:"social"},{id:"atividades_extras",question:"Atividades Extracurriculares",type:"text",category:"social"}];var m=a(60930);function u(e){let{patient:t,data:a}=e;return(0,s.jsx)("button",{onClick:()=>{var e;let s=new m.ZP,i=20;s.setFont("helvetica"),s.setFontSize(18),s.text("Anamnese Musicoterap\xeautica",s.internal.pageSize.getWidth()/2,i,{align:"center"}),i+=15,s.setFontSize(10),s.text(new Date().toLocaleDateString("pt-BR"),s.internal.pageSize.getWidth()-20,i,{align:"right"}),s.text("MuseTera",s.internal.pageSize.getWidth()-20,i+5,{align:"right"}),i+=20,s.setFontSize(14),s.text("Dados do Paciente",20,i),i+=10,s.setFontSize(12),s.text("Nome: ".concat((null==t?void 0:t.name)||"N\xe3o informado"),20,i),i+=7,s.text("Data de Nascimento: ".concat((null==t?void 0:t.dateOfBirth)?new Date(t.dateOfBirth).toLocaleDateString("pt-BR"):"N\xe3o informado"),20,i),i+=7,s.text("Contato: ".concat((null==t?void 0:null===(e=t.contactInfo)||void 0===e?void 0:e.phone)||"N\xe3o informado"),20,i),i+=7,s.text("Status: ".concat((null==t?void 0:t.status)==="active"?"Ativo":"Inativo"),20,i),i+=15,Object.entries(d.reduce((e,t)=>(e[t.category]||(e[t.category]=[]),e[t.category].push(t),e),{})).forEach(e=>{let[t,n]=e;i>s.internal.pageSize.getHeight()-20&&(s.addPage(),i=20),s.setFontSize(14),s.text({dados_pessoais:"Dados Pessoais e Familiares",historia_musical:"Hist\xf3ria Musical",desenvolvimento:"Desenvolvimento",comportamento:"Comportamento",saude:"Sa\xfade",social:"Aspectos Sociais",preferencias_musicais:"Prefer\xeancias Musicais"}[t]||t,20,i),i+=10,s.setFontSize(12),n.forEach(e=>{var t;i>s.internal.pageSize.getHeight()-40&&(s.addPage(),i=20),s.setFont("helvetica","bold"),s.text(e.question,20,i),i+=7,s.setFont("helvetica","normal");let n=(t=null==a?void 0:a[e.id])?Array.isArray(t)?t.join(", "):t:"-";s.splitTextToSize(n,s.internal.pageSize.getWidth()-40).forEach(e=>{i>s.internal.pageSize.getHeight()-20&&(s.addPage(),i=20),s.text(e,20,i),i+=7}),i+=3}),i+=10}),s.save("anamnese_".concat(t.name.toLowerCase().replace(/\s+/g,"_"),".pdf"))},className:"px-3 py-1.5 text-sm bg-green-600 text-white rounded-md hover:bg-green-700",children:"Exportar PDF"})}var p=a(5343);function g(){(0,n.useRouter)();let[e,t]=(0,i.useState)(null);return(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 py-4 sm:py-8",children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 md:px-6 lg:px-8",children:[(0,s.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,s.jsx)(p.T,{size:"sm"})}),(0,s.jsx)(o.Z,{children:(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Anamnese Musicoterap\xeautica"}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsx)("div",{children:(0,s.jsxs)("div",{className:"flex items-end gap-4",children:[(0,s.jsx)("div",{className:"flex-1",children:(0,s.jsx)(r.j,{onSelect:t,selectedId:null==e?void 0:e.id})}),(0,s.jsxs)(l(),{href:"/pacientes/novo",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 inline-flex items-center gap-2",children:[(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),"Novo Paciente"]})]})}),e&&(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Anamnese de ",e.name]}),(0,s.jsx)(x,{patient:e})]}),!e&&(0,s.jsx)("div",{className:"text-center py-6 text-gray-500",children:"Selecione um paciente ou cadastre um novo para iniciar a anamnese musicoterap\xeautica"})]})]})})]})})}function x(e){let{patient:t}=e,a=(0,n.useRouter)(),{addAnamnese:r}=function(){let[e,t]=(0,i.useState)([]);return(0,i.useEffect)(()=>{t(JSON.parse(localStorage.getItem("anamneses")||"[]"))},[]),{anamneses:e,addAnamnese:a=>{let s=[...e,{...a,id:crypto.randomUUID(),createdAt:new Date,updatedAt:new Date}];localStorage.setItem("anamneses",JSON.stringify(s)),t(s),window.dispatchEvent(new Event("anamnesesUpdated"))},getAnamneseByPatientId:t=>e.find(e=>e.patientId===t)}}(),[c,l]=(0,i.useState)({}),[m,p]=(0,i.useState)(!1),g=async e=>{e.preventDefault(),p(!0);try{let e={patientId:t.id,respostas:c,observacoes:c.observacoes};r(e),alert("Anamnese salva com sucesso!"),a.push("/pacientes")}catch(e){console.error("Erro ao salvar anamnese:",e),alert("Erro ao salvar anamnese. Tente novamente.")}finally{p(!1)}},x=(e,t)=>{l(a=>({...a,[e]:t}))},h=d.reduce((e,t)=>(e[t.category]||(e[t.category]=[]),e[t.category].push(t),e),{}),v=e=>({dados_pessoais:"Dados Pessoais e Familiares",historia_musical:"Hist\xf3ria Musical",desenvolvimento:"Desenvolvimento",comportamento:"Comportamento",saude:"Sa\xfade",social:"Aspectos Sociais",preferencias_musicais:"Prefer\xeancias Musicais"})[e]||e;return(0,s.jsxs)("form",{onSubmit:g,className:"space-y-3",children:[Object.entries(h).map(e=>{let[t,a]=e;return(0,s.jsx)(o.Z,{children:(0,s.jsxs)("div",{className:"p-3",children:[(0,s.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-2",children:v(t)}),(0,s.jsx)("div",{className:"space-y-3",children:a.map(e=>{var t,a;return(0,s.jsxs)("div",{className:"space-y-1",children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:e.question}),"text"===e.type&&(0,s.jsx)("textarea",{className:"w-full p-1.5 border rounded-md resize-none text-sm",rows:2,value:c[e.id]||"",onChange:t=>x(e.id,t.target.value),placeholder:"Digite aqui..."}),"single"===e.type&&(0,s.jsxs)("select",{className:"w-full p-1.5 border rounded-md bg-white text-sm",value:c[e.id]||"",onChange:t=>x(e.id,t.target.value),children:[(0,s.jsx)("option",{value:"",children:"Selecione..."}),null===(t=e.options)||void 0===t?void 0:t.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]}),"multiple"===e.type&&(0,s.jsx)("div",{className:"grid grid-cols-2 gap-1.5 text-sm",children:null===(a=e.options)||void 0===a?void 0:a.map(t=>(0,s.jsxs)("label",{className:"flex items-center gap-1.5",children:[(0,s.jsx)("input",{type:"checkbox",checked:Array.isArray(c[e.id])&&c[e.id].includes(t),onChange:a=>{let s=Array.isArray(c[e.id])?c[e.id]:[],i=a.target.checked?[...s,t]:s.filter(e=>e!==t);x(e.id,i)},className:"rounded border-gray-300 h-3.5 w-3.5"}),(0,s.jsx)("span",{className:"text-gray-700 text-sm",children:t})]},t))})]},e.id)})})]})},t)}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 mt-4",children:[(0,s.jsx)("button",{type:"button",onClick:()=>a.back(),className:"px-3 py-1.5 text-sm border rounded-md hover:bg-gray-50",children:"Cancelar"}),(0,s.jsx)(u,{patient:t,data:c})]})]})}},5343:function(e,t,a){"use strict";a.d(t,{T:function(){return o}});var s=a(57437),i=a(16691),n=a.n(i);function o(e){let{size:t="sm",showText:a=!0}=e,{width:i,height:o,textSize:r}={sm:{width:50,height:50,textSize:"text-xl"},md:{width:80,height:80,textSize:"text-2xl"},lg:{width:120,height:120,textSize:"text-3xl md:text-4xl"}}[t];return(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)(n(),{src:"/logo-musicoterapia.png",alt:"Logo Musicoterapia",width:i,height:o,className:"rounded-full logo-musicoterapia",priority:!0}),a&&(0,s.jsx)("span",{className:"font-bold text-green-700 ".concat(r),children:"Musicoterapia"})]})}},34170:function(e,t,a){"use strict";a.d(t,{j:function(){return n}});var s=a(57437),i=a(38041);function n(e){let{onSelect:t,selectedId:a,disabled:n,className:o=""}=e,{patients:r,loading:c}=(0,i.w)();return c?(0,s.jsx)("div",{className:"w-full p-2.5 border border-gray-300 rounded-lg bg-gray-50 text-gray-500 text-sm text-center",children:"Carregando pacientes..."}):(0,s.jsxs)("div",{className:"w-full space-y-1",children:[(0,s.jsx)("label",{className:"block text-xs sm:text-sm font-medium text-gray-700",children:"Selecione o Paciente"}),(0,s.jsxs)("select",{value:a||"",onChange:e=>{let a=e.target.value;t((a?r.find(e=>e.id===a):null)||null)},disabled:n,className:"\n          block w-full rounded-lg border-gray-300 \n          py-2 sm:py-2.5 \n          pl-3 pr-10 \n          text-sm text-gray-900 \n          focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 \n          ".concat(o,"\n        "),children:[(0,s.jsx)("option",{value:"",className:"text-xs sm:text-sm",children:"Selecione um paciente"}),r.map(e=>(0,s.jsxs)("option",{value:e.id,className:"text-xs sm:text-sm",children:[e.name," (",new Date(e.dateOfBirth).toLocaleDateString(),")"]},e.id))]})]})}},57418:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var s=a(57437);function i(e){let{children:t,className:a=""}=e;return(0,s.jsx)("div",{className:"bg-white rounded-xl shadow-lg ring-1 ring-gray-900/5 ".concat(a),children:t})}},38041:function(e,t,a){"use strict";a.d(t,{w:function(){return i}});var s=a(2265);function i(){let[e,t]=(0,s.useState)([]),[a,i]=(0,s.useState)(!0),n=()=>{t(JSON.parse(localStorage.getItem("patients")||"[]").map(e=>({...e,dateOfBirth:new Date(e.dateOfBirth),createdAt:new Date(e.createdAt)}))),i(!1)};return(0,s.useEffect)(()=>(n(),window.addEventListener("patientsUpdated",n),()=>window.removeEventListener("patientsUpdated",n)),[]),{patients:e,loading:a,addPatient:t=>{let a=[...e,t];localStorage.setItem("patients",JSON.stringify(a)),window.dispatchEvent(new Event("patientsUpdated"))},updatePatient:t=>{let a=[...e],s=a.findIndex(e=>e.id===t.id);-1!==s&&(a[s]=t,localStorage.setItem("patients",JSON.stringify(a)),window.dispatchEvent(new Event("patientsUpdated")))},deletePatient:t=>{let a=e.filter(e=>e.id!==t);localStorage.setItem("patients",JSON.stringify(a)),window.dispatchEvent(new Event("patientsUpdated"))},refreshPatients:n}}},24033:function(e,t,a){e.exports=a(15313)}},function(e){e.O(0,[2505,1176,6691,7198,2971,4938,1744],function(){return e(e.s=56611)}),_N_E=e.O()}]);