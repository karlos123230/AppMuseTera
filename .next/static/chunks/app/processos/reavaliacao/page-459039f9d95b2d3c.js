(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8945],{9619:function(e,t,a){Promise.resolve().then(a.bind(a,24216))},24216:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return v}});var o=a(57437),i=a(2265),s=a(24033),n=a(57418),c=a(34170),r=a(61396),l=a.n(r);let d=[{id:"habilidades_musicais",question:"Evolu\xe7\xe3o das Habilidades Musicais",type:"multiple",options:["Melhora na percep\xe7\xe3o r\xedtmica","Desenvolvimento da express\xe3o vocal","Amplia\xe7\xe3o do repert\xf3rio musical","Maior explora\xe7\xe3o instrumental","Aumento da criatividade musical","Melhor coordena\xe7\xe3o motora musical","Desenvolvimento da improvisa\xe7\xe3o"],category:"evolucao_musical"},{id:"respostas_musicais",question:"Respostas aos Est\xedmulos Musicais",type:"multiple",options:["Maior engajamento nas atividades","Melhor resposta a comandos musicais","Iniciativa musical espont\xe2nea","Intera\xe7\xe3o musical mais adequada","Maior tempo de participa\xe7\xe3o","Melhor regula\xe7\xe3o atrav\xe9s da m\xfasica"],category:"evolucao_musical"},{id:"preferencias_atuais",question:"Prefer\xeancias Musicais Atuais",type:"text",category:"evolucao_musical"},{id:"mudancas_comportamento",question:"Mudan\xe7as Comportamentais Observadas",type:"multiple",options:["Redu\xe7\xe3o de comportamentos inadequados","Melhor regula\xe7\xe3o emocional","Aumento do tempo de aten\xe7\xe3o","Maior flexibilidade","Redu\xe7\xe3o da ansiedade","Melhor organiza\xe7\xe3o comportamental"],category:"evolucao_comportamental"},{id:"nivel_participacao",question:"N\xedvel de Participa\xe7\xe3o",type:"escala",options:["1","2","3","4","5"],category:"evolucao_comportamental"},{id:"observacoes_comportamentais",question:"Observa\xe7\xf5es Comportamentais Espec\xedficas",type:"text",category:"evolucao_comportamental"},{id:"interacao_social",question:"Evolu\xe7\xe3o na Intera\xe7\xe3o Social",type:"multiple",options:["Melhora no contato visual","Aumento da reciprocidade social","Maior iniciativa de intera\xe7\xe3o","Melhor participa\xe7\xe3o em grupo","Desenvolvimento do v\xednculo terap\xeautico","Maior engajamento social"],category:"evolucao_social"},{id:"comunicacao",question:"Desenvolvimento da Comunica\xe7\xe3o",type:"multiple",options:["Aumento do vocabul\xe1rio","Melhor express\xe3o verbal","Desenvolvimento da comunica\xe7\xe3o n\xe3o-verbal","Maior compreens\xe3o de comandos","Redu\xe7\xe3o de ecolalias","Comunica\xe7\xe3o mais funcional"],category:"evolucao_social"},{id:"objetivos_alcancados",question:"Objetivos Alcan\xe7ados",type:"multiple",options:["Desenvolvimento musical","Melhora na comunica\xe7\xe3o","Evolu\xe7\xe3o social","Regula\xe7\xe3o emocional","Desenvolvimento motor","Organiza\xe7\xe3o comportamental"],category:"objetivos"},{id:"objetivos_andamento",question:"Objetivos em Andamento",type:"text",category:"objetivos"},{id:"novos_objetivos",question:"Novos Objetivos Propostos",type:"text",category:"objetivos"},{id:"ajustes_plano",question:"Ajustes no Plano Terap\xeautico",type:"text",category:"recomendacoes"},{id:"recomendacoes_familia",question:"Recomenda\xe7\xf5es para Fam\xedlia",type:"text",category:"recomendacoes"},{id:"encaminhamentos",question:"Encaminhamentos Necess\xe1rios",type:"text",category:"recomendacoes"}];var m=a(60930);function u(e){let{patient:t,data:a}=e;return(0,o.jsx)("button",{onClick:()=>{var e;let o=new m.ZP,i=20;o.setFont("helvetica"),o.setFontSize(18),o.text("Reavalia\xe7\xe3o Musicoterap\xeautica",o.internal.pageSize.getWidth()/2,i,{align:"center"}),i+=15,o.setFontSize(10),o.text(new Date().toLocaleDateString("pt-BR"),o.internal.pageSize.getWidth()-20,i,{align:"right"}),o.text("MuseTera",o.internal.pageSize.getWidth()-20,i+5,{align:"right"}),i+=20,o.setFontSize(14),o.text("Dados do Paciente",20,i),i+=10,o.setFontSize(12),o.text("Nome: ".concat((null==t?void 0:t.name)||"N\xe3o informado"),20,i),i+=7,o.text("Data de Nascimento: ".concat((null==t?void 0:t.dateOfBirth)?new Date(t.dateOfBirth).toLocaleDateString("pt-BR"):"N\xe3o informado"),20,i),i+=7,o.text("Contato: ".concat((null==t?void 0:null===(e=t.contactInfo)||void 0===e?void 0:e.phone)||"N\xe3o informado"),20,i),i+=7,o.text("Status: ".concat((null==t?void 0:t.status)==="active"?"Ativo":"Inativo"),20,i),i+=15,Object.entries(d.reduce((e,t)=>(e[t.category]||(e[t.category]=[]),e[t.category].push(t),e),{})).forEach(e=>{let[t,s]=e;i>o.internal.pageSize.getHeight()-20&&(o.addPage(),i=20),o.setFontSize(14),o.text({desenvolvimento_musical:"Desenvolvimento Musical",aspectos_comportamentais:"Aspectos Comportamentais",aspectos_sociais:"Aspectos Sociais",aspectos_cognitivos:"Aspectos Cognitivos",aspectos_motores:"Aspectos Motores",aspectos_comunicativos:"Aspectos Comunicativos"}[t]||t,20,i),i+=10,o.setFontSize(12),s.forEach(e=>{var t;i>o.internal.pageSize.getHeight()-40&&(o.addPage(),i=20),o.setFont("helvetica","bold"),o.text(e.question,20,i),i+=7,o.setFont("helvetica","normal");let s=(t=null==a?void 0:a[e.id])?Array.isArray(t)?t.join(", "):t:"-";o.splitTextToSize(s,o.internal.pageSize.getWidth()-40).forEach(e=>{i>o.internal.pageSize.getHeight()-20&&(o.addPage(),i=20),o.text(e,20,i),i+=7}),i+=3}),i+=10}),o.save("reavaliacao_".concat(t.name.toLowerCase().replace(/\s+/g,"_"),".pdf"))},className:"px-3 py-1.5 text-sm bg-green-600 text-white rounded-md hover:bg-green-700",children:"Exportar PDF"})}var p=a(5343);function v(){(0,s.useRouter)();let[e,t]=(0,i.useState)(null);return(0,o.jsx)("div",{className:"min-h-screen bg-gray-50 py-4 sm:py-8",children:(0,o.jsxs)("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 md:px-6 lg:px-8",children:[(0,o.jsx)("div",{className:"flex justify-between items-center mb-6",children:(0,o.jsx)(p.T,{size:"sm"})}),(0,o.jsx)("div",{className:"max-w-4xl mx-auto py-6",children:(0,o.jsx)(n.Z,{children:(0,o.jsxs)("div",{className:"p-6",children:[(0,o.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Reavalia\xe7\xe3o Musicoterap\xeautica"}),(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsx)("div",{children:(0,o.jsxs)("div",{className:"flex items-end gap-4",children:[(0,o.jsx)("div",{className:"flex-1",children:(0,o.jsx)(c.j,{onSelect:t,selectedId:null==e?void 0:e.id})}),(0,o.jsxs)(l(),{href:"/pacientes/novo",className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 inline-flex items-center gap-2",children:[(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),"Novo Paciente"]})]})}),e&&(0,o.jsxs)("div",{className:"mt-6",children:[(0,o.jsxs)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Reavalia\xe7\xe3o de ",e.name]}),(0,o.jsx)(x,{patient:e})]}),!e&&(0,o.jsx)("div",{className:"text-center py-6 text-gray-500",children:"Selecione um paciente para iniciar a reavalia\xe7\xe3o musicoterap\xeautica"})]})]})})})]})})}function x(e){let{patient:t}=e,a=(0,s.useRouter)(),{addReavaliacao:c}=function(){let[e,t]=(0,i.useState)([]);return(0,i.useEffect)(()=>{t(JSON.parse(localStorage.getItem("reavaliacoes")||"[]"))},[]),{reavaliacoes:e,addReavaliacao:a=>{let o=[...e,{...a,id:crypto.randomUUID(),createdAt:new Date,updatedAt:new Date}];localStorage.setItem("reavaliacoes",JSON.stringify(o)),t(o),window.dispatchEvent(new Event("revaliacoesUpdated"))},getReavaliacaoByPatientId:t=>e.find(e=>e.patientId===t)}}(),[r,l]=(0,i.useState)({}),[m,p]=(0,i.useState)(!1),v=async e=>{e.preventDefault(),p(!0);try{let e={patientId:t.id,respostas:r,observacoes:r.observacoes};c(e),alert("Reavalia\xe7\xe3o salva com sucesso!"),a.push("/pacientes")}catch(e){console.error("Erro ao salvar reavalia\xe7\xe3o:",e),alert("Erro ao salvar reavalia\xe7\xe3o. Tente novamente.")}finally{p(!1)}},x=(e,t)=>{l(a=>({...a,[e]:t}))},g=e=>({evolucao_musical:"Evolu\xe7\xe3o Musical",evolucao_comportamental:"Evolu\xe7\xe3o Comportamental",evolucao_social:"Evolu\xe7\xe3o Social",objetivos:"Objetivos",recomendacoes:"Recomenda\xe7\xf5es"})[e]||e,h=d.reduce((e,t)=>(e[t.category]||(e[t.category]=[]),e[t.category].push(t),e),{});return(0,o.jsxs)("form",{onSubmit:v,className:"space-y-3",children:[Object.entries(h).map(e=>{let[t,a]=e;return(0,o.jsx)(n.Z,{children:(0,o.jsxs)("div",{className:"p-3",children:[(0,o.jsx)("h3",{className:"text-base font-semibold text-gray-900 mb-2",children:g(t)}),(0,o.jsx)("div",{className:"space-y-3",children:a.map(e=>{var t,a;return(0,o.jsxs)("div",{className:"space-y-1",children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:e.question}),"text"===e.type&&(0,o.jsx)("textarea",{className:"w-full p-1.5 border rounded-md resize-none text-sm",rows:2,value:r[e.id]||"",onChange:t=>x(e.id,t.target.value),placeholder:"Digite aqui..."}),"multiple"===e.type&&(0,o.jsx)("div",{className:"grid grid-cols-2 gap-1.5 text-sm",children:null===(t=e.options)||void 0===t?void 0:t.map(t=>(0,o.jsxs)("label",{className:"flex items-center gap-1.5",children:[(0,o.jsx)("input",{type:"checkbox",checked:Array.isArray(r[e.id])&&r[e.id].includes(t),onChange:a=>{let o=Array.isArray(r[e.id])?r[e.id]:[],i=a.target.checked?[...o,t]:o.filter(e=>e!==t);x(e.id,i)},className:"rounded border-gray-300 h-3.5 w-3.5"}),(0,o.jsx)("span",{className:"text-gray-700 text-sm",children:t})]},t))}),"escala"===e.type&&(0,o.jsx)("div",{className:"flex gap-2",children:null===(a=e.options)||void 0===a?void 0:a.map(t=>(0,o.jsxs)("label",{className:"flex items-center gap-1",children:[(0,o.jsx)("input",{type:"radio",name:e.id,value:t,checked:r[e.id]===t,onChange:t=>x(e.id,t.target.value),className:"sr-only"}),(0,o.jsx)("span",{className:"w-8 h-8 flex items-center justify-center rounded-full border\n                            ".concat(r[e.id]===t?"bg-indigo-600 text-white":"bg-white text-gray-700 hover:bg-gray-50"),children:t})]},t))})]},e.id)})})]})},t)}),(0,o.jsxs)("div",{className:"flex justify-end gap-3 mt-4",children:[(0,o.jsx)("button",{type:"button",onClick:()=>a.back(),className:"px-3 py-1.5 text-sm border rounded-md hover:bg-gray-50",children:"Cancelar"}),(0,o.jsx)(u,{patient:t,data:r})]})]})}},5343:function(e,t,a){"use strict";a.d(t,{T:function(){return n}});var o=a(57437),i=a(16691),s=a.n(i);function n(e){let{size:t="sm",showText:a=!0}=e,{width:i,height:n,textSize:c}={sm:{width:50,height:50,textSize:"text-xl"},md:{width:80,height:80,textSize:"text-2xl"},lg:{width:120,height:120,textSize:"text-3xl md:text-4xl"}}[t];return(0,o.jsxs)("div",{className:"flex items-center gap-4",children:[(0,o.jsx)(s(),{src:"/logo-musicoterapia.png",alt:"Logo Musicoterapia",width:i,height:n,className:"rounded-full logo-musicoterapia",priority:!0}),a&&(0,o.jsx)("span",{className:"font-bold text-green-700 ".concat(c),children:"Musicoterapia"})]})}},34170:function(e,t,a){"use strict";a.d(t,{j:function(){return s}});var o=a(57437),i=a(38041);function s(e){let{onSelect:t,selectedId:a,disabled:s,className:n=""}=e,{patients:c,loading:r}=(0,i.w)();return r?(0,o.jsx)("div",{className:"w-full p-2.5 border border-gray-300 rounded-lg bg-gray-50 text-gray-500 text-sm text-center",children:"Carregando pacientes..."}):(0,o.jsxs)("div",{className:"w-full space-y-1",children:[(0,o.jsx)("label",{className:"block text-xs sm:text-sm font-medium text-gray-700",children:"Selecione o Paciente"}),(0,o.jsxs)("select",{value:a||"",onChange:e=>{let a=e.target.value;t((a?c.find(e=>e.id===a):null)||null)},disabled:s,className:"\n          block w-full rounded-lg border-gray-300 \n          py-2 sm:py-2.5 \n          pl-3 pr-10 \n          text-sm text-gray-900 \n          focus:border-indigo-500 focus:outline-none focus:ring-1 focus:ring-indigo-500 \n          ".concat(n,"\n        "),children:[(0,o.jsx)("option",{value:"",className:"text-xs sm:text-sm",children:"Selecione um paciente"}),c.map(e=>(0,o.jsxs)("option",{value:e.id,className:"text-xs sm:text-sm",children:[e.name," (",new Date(e.dateOfBirth).toLocaleDateString(),")"]},e.id))]})]})}},57418:function(e,t,a){"use strict";a.d(t,{Z:function(){return i}});var o=a(57437);function i(e){let{children:t,className:a=""}=e;return(0,o.jsx)("div",{className:"bg-white rounded-xl shadow-lg ring-1 ring-gray-900/5 ".concat(a),children:t})}},38041:function(e,t,a){"use strict";a.d(t,{w:function(){return i}});var o=a(2265);function i(){let[e,t]=(0,o.useState)([]),[a,i]=(0,o.useState)(!0),s=()=>{t(JSON.parse(localStorage.getItem("patients")||"[]").map(e=>({...e,dateOfBirth:new Date(e.dateOfBirth),createdAt:new Date(e.createdAt)}))),i(!1)};return(0,o.useEffect)(()=>(s(),window.addEventListener("patientsUpdated",s),()=>window.removeEventListener("patientsUpdated",s)),[]),{patients:e,loading:a,addPatient:t=>{let a=[...e,t];localStorage.setItem("patients",JSON.stringify(a)),window.dispatchEvent(new Event("patientsUpdated"))},updatePatient:t=>{let a=[...e],o=a.findIndex(e=>e.id===t.id);-1!==o&&(a[o]=t,localStorage.setItem("patients",JSON.stringify(a)),window.dispatchEvent(new Event("patientsUpdated")))},deletePatient:t=>{let a=e.filter(e=>e.id!==t);localStorage.setItem("patients",JSON.stringify(a)),window.dispatchEvent(new Event("patientsUpdated"))},refreshPatients:s}}},24033:function(e,t,a){e.exports=a(15313)}},function(e){e.O(0,[2505,1176,6691,7198,2971,4938,1744],function(){return e(e.s=9619)}),_N_E=e.O()}]);